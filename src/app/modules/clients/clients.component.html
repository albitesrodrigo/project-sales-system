<div class="w-100 m-2 mb-4">
  <form>
    <div class="flex items-center justify-between gap-4 m-4">
      <div class="flex items-center gap-2">
        <input
          pInputText
          [(ngModel)]="nameClient"
          name="nameClient"
          type="text"
          placeholder="Buscar por nombre o apellido"
          class="w-64"
        />

        <p-button
          icon="pi pi-search"
          label="Buscar"
          severity="contrast"
          (onClick)="fetchClients()"
        />
      </div>
      <p-button
        icon="pi pi-user-plus"
        label="Crear Cliente"
        severity="primary"
        (onClick)="showDialogCreateClient()"
      />
    </div>
  </form>
  <div class="rounded-lg shadow-md m-4">
    <p-table
      [value]="clientes"
      dataKey="id"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      showGridlines
    >
      <ng-template #header>
        <tr class="rounded-t-xl overflow-hidden">
          <th class="custom-header text-center">#</th>
          <th
            class="whitespace-nowrap font-bold"
            *ngFor="let col of columns"
            style="min-width: 5rem"
          >
            {{ col.header }}
          </th>
          <th class="font-bold text-center">Acciones</th>
        </tr>
      </ng-template>
      <ng-template #body let-cliente let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td *ngFor="let col of columns">
            {{ cliente[col.field] || "-" }}
          </td>

          <td>
            <div class="flex justify-center gap-2">
              <p-button
                icon="pi pi-pencil"
                severity="secondary"
                size="small"
                (click)="showDialogEditClient()"
              />
              <p-button
                icon="pi pi-trash"
                severity="danger"
                size="small"
                (click)="trashClient(cliente, $event)"
              />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<app-loading-spinner [loading]="loading"></app-loading-spinner>
<app-dialog-client
  [(visible)]="dialogVisible"
  (visibleChange)="dialogVisible = $event"
  [isEdit]="isEditing"
></app-dialog-client>
<p-toast />
<p-confirmdialog />
