<div class="w-100 m-2 mb-4">
  <form>
    <!-- <div class="flex items-center justify-between gap-4 m-4">
      <div class="flex items-center gap-2">
        <input
          pInputText
          [(ngModel)]="nameProduct"
          name="nameProduct"
          type="text"
          placeholder="Buscar nombre de producto"
          class="w-64"
        />
        <p-button
          icon="pi pi-search"
          label="Buscar"
          severity="contrast"
          (onClick)="fetchProducts()"
        />
      </div>
      <p-button
        icon="pi pi-box"
        label="Crear Producto"
        severity="primary"
        (onClick)="showDialogCreateProduct()"
      />
    </div> -->
    <div class="flex items-center justify-end m-4">
      <p-button
        icon="pi pi-box"
        label="Crear Producto"
        severity="primary"
        (onClick)="showDialogCreateProduct()"
      />
    </div>
  </form>
  <div class="rounded-lg shadow-md m-4">
    <p-table
      [value]="products"
      dataKey="id"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      showGridlines
    >
      <ng-template #header>
        <tr class="rounded-t-xl overflow-hidden">
          <th class="text-center">#</th>
          <th
            class="whitespace-nowrap font-bold"
            *ngFor="let col of columns"
            style="min-width: 5rem"
          >
            {{ col.header }}
            <p-columnFilter
              type="text"
              [field]="col.field"
              display="menu"
              class="icon-filter"
            />
          </th>
          <th class="font-bold text-center">Acciones</th>
        </tr>
      </ng-template>
      <ng-template #body let-producto let-i="rowIndex">
        <tr>
          <td class="text-center">{{ i + 1 }}</td>
          <td *ngFor="let col of columns">
            {{ producto[col.field] || "-" }}
          </td>
          <td>
            <div class="flex justify-center gap-2">
              <p-button
                icon="pi pi-pencil"
                severity="secondary"
                size="small"
                (click)="showDialogEditProduct(producto)"
              />
              <p-button
                icon="pi pi-trash"
                severity="danger"
                size="small"
                (click)="trashProduct(producto, $event)"
              />
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
<app-dialog-product
  [(visible)]="dialogVisible"
  (visibleChange)="dialogVisible = $event"
  [isEdit]="isEditing"
  [productData]="dataEdit"
  (productSaved)="onProductSaved($event)"
></app-dialog-product>
<p-toast />
<p-confirmdialog />
