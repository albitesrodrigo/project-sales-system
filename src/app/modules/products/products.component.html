<div class="p-6 bg-gray-50 min-h-screen">
  <!-- Cabecera -->
  <div
    class="flex flex-col md:flex-row md:items-center md:justify-between mb-8 gap-4"
  >
    <div>
      <h1 class="text-3xl font-bold text-gray-800 flex items-center mb-1">
        <i class="pi pi-box text-orange-500 mr-3 text-2xl"></i>
        Gesti√≥n de Productos
      </h1>
      <p class="text-gray-600">
        Administra y consulta tus productos registrados
      </p>
    </div>
    <div>
      <p-button
        icon="pi pi-box"
        label="Crear Producto"
        severity="primary"
        class="shadow-md"
        (onClick)="showDialogCreateProduct()"
      />
    </div>
  </div>

  <!-- Tarjeta resumen -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div
      class="bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500 flex items-center"
    >
      <div class="bg-orange-100 p-3 rounded-full mr-4">
        <i class="pi pi-box text-orange-500 text-2xl"></i>
      </div>
      <div>
        <p class="text-gray-600 text-sm font-medium">Total Productos</p>
        <p class="text-2xl font-bold text-gray-800">
          {{ products.length || 0 }}
        </p>
      </div>
    </div>
  </div>

  <!-- Tabla de productos -->
  <div class="rounded-lg shadow-md bg-white p-4">
    <p-table
      [value]="products"
      dataKey="id"
      [rows]="10"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      showGridlines
      class="rounded-lg"
    >
      <ng-template #header>
        <tr>
          <th class="text-center">#</th>
          <th
            *ngFor="let col of columns"
            class="whitespace-nowrap font-bold"
            style="min-width: 5rem"
          >
            {{ col.header }}
            <p-columnFilter
              type="text"
              [field]="col.field"
              display="menu"
              class="icon-filter"
            />
          </th>
          <th class="font-bold text-center">Acciones</th>
        </tr>
      </ng-template>
      <ng-template #body let-producto let-i="rowIndex">
        <tr>
          <td class="text-center">{{ i + 1 }}</td>
          <td *ngFor="let col of columns">
            {{ producto[col.field] || "-" }}
          </td>
          <td>
            <div class="flex justify-center gap-2">
              <p-button
                icon="pi pi-pencil"
                severity="secondary"
                size="small"
                (click)="showDialogEditProduct(producto)"
                tooltip="Editar"
              />
              <p-button
                icon="pi pi-trash"
                severity="danger"
                size="small"
                (click)="trashProduct(producto, $event)"
                tooltip="Eliminar"
              />
            </div>
          </td>
        </tr>
      </ng-template>
      <ng-template #emptymessage>
        <tr>
          <td
            [attr.colspan]="columns.length + 2"
            class="text-center text-gray-400 py-8"
          >
            <i class="pi pi-info-circle mr-2"></i>
            No hay productos registrados.
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<app-dialog-product
  [(visible)]="dialogVisible"
  (visibleChange)="dialogVisible = $event"
  [isEdit]="isEditing"
  [productData]="dataEdit"
  (productSaved)="onProductSaved($event)"
></app-dialog-product>
<p-toast />
<p-confirmdialog />
